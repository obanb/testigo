"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const apollo_server_express_1 = require("apollo-server-express");
exports.createApolloServer = ({ schema, debug, createContextFn }) => {
    const playground = {
        settings: {
            'editor.theme': 'light',
        },
    };
    const apolloServerConfig = {
        schema,
        // apollo perf cloude
        engine: false,
        playground,
        uploads: {
            maxFileSize: 10000000,
        },
        introspection: true,
        subscriptions: false,
        tracing: debug,
        debug,
        // TODO - account context
        // formatError: handleGraphQLError,
        context: async (args) => {
            const { req, res } = args;
            const uuidNo = req.headers.uuidNo;
            const accountContext = { user: '1' };
            const ctx = {
                // generated by apollo
                httpRequest: req,
                httpResponse: res,
                // per-request generated
                uuidNo,
                accountContext,
            };
            return ctx;
        },
    };
    return new apollo_server_express_1.ApolloServer(apolloServerConfig);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlQXBvbGxvU2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlcnZlci9jcmVhdGVBcG9sbG9TZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxpRUFBNkU7QUFTaEUsUUFBQSxrQkFBa0IsR0FBRyxDQUFDLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxlQUFlLEVBQTJCLEVBQWdCLEVBQUU7SUFDM0csTUFBTSxVQUFVLEdBQXFCO1FBQ2pDLFFBQVEsRUFBRTtZQUNOLGNBQWMsRUFBRSxPQUFPO1NBQzFCO0tBQ0osQ0FBQztJQUVGLE1BQU0sa0JBQWtCLEdBQVc7UUFDL0IsTUFBTTtRQUNOLHFCQUFxQjtRQUNyQixNQUFNLEVBQUUsS0FBSztRQUNiLFVBQVU7UUFDVixPQUFPLEVBQUU7WUFDTCxXQUFXLEVBQUUsUUFBUTtTQUNIO1FBQ3RCLGFBQWEsRUFBRSxJQUFJO1FBQ25CLGFBQWEsRUFBRSxLQUFLO1FBRXBCLE9BQU8sRUFBRSxLQUFLO1FBQ2QsS0FBSztRQUNMLHlCQUF5QjtRQUN6QixtQ0FBbUM7UUFFbkMsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFTLEVBQUUsRUFBRTtZQUN6QixNQUFNLEVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBQyxHQUFHLElBQUksQ0FBQztZQUN4QixNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUNsQyxNQUFNLGNBQWMsR0FBRyxFQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsQ0FBQztZQUVuQyxNQUFNLEdBQUcsR0FBUTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVcsRUFBRSxHQUFHO2dCQUNoQixZQUFZLEVBQUUsR0FBRztnQkFFakIsd0JBQXdCO2dCQUN4QixNQUFNO2dCQUNOLGNBQWM7YUFDakIsQ0FBQztZQUNGLE9BQU8sR0FBRyxDQUFDO1FBQ2YsQ0FBQztLQUVKLENBQUM7SUFDRixPQUFPLElBQUksb0NBQVksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ2hELENBQUMsQ0FBQyJ9
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const pipeable_1 = require("fp-ts/lib/pipeable");
const Apply_1 = require("fp-ts/lib/Apply");
const O = require("fp-ts/lib/Option");
const E = require("fp-ts/lib/Either");
/*
 *  multiple either left semigroup concat throw sequenceT extended applicative apply
 */
exports.validateCreateGroupInput = (input) => {
    return pipeable_1.pipe(Apply_1.sequenceT(eitherLeftConcat(getSemigroupArray()))(exports.validateName(input)), E.map(() => input));
};
exports.validateName = (input) => pipeable_1.pipe(input, O.fromNullable, O.mapNullable((inp) => inp.name), E.fromOption(() => ['missing name']), E.chain((title) => (title.length > 30 ? E.left(['maximum 30 characters']) : E.right(input))));
/**
 * extended applicative for apply inside sequence/sequenceT for semigroup concat of either left sides
 */
const eitherLeftConcat = (semi) => ({
    URI: E.URI,
    _E: undefined,
    map: E.either.map,
    of: E.either.of,
    ap: (mab, ma) => (E.isLeft(mab) ? (E.isLeft(ma) ? E.left(semi.concat(mab.left, ma.left)) : mab) : E.isLeft(ma) ? ma : E.right(mab.right(ma.right))),
    chain: E.either.chain,
});
const getSemigroupArray = () => ({
    concat: (x, y) => [...x, ...y],
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JvdXBWYWxpZGF0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tb2R1bGVzL2dyb3VwL2NvcmUvZ3JvdXBWYWxpZGF0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUF3QztBQUN4QywyQ0FBMEM7QUFHMUMsc0NBQXNDO0FBQ3RDLHNDQUFzQztBQUd0Qzs7R0FFRztBQUNVLFFBQUEsd0JBQXdCLEdBQUcsQ0FBQyxLQUF1QixFQUF3QyxFQUFFO0lBQ3RHLE9BQU8sZUFBSSxDQUNQLGlCQUFTLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLEVBQVUsQ0FBQyxDQUFDLENBQUMsb0JBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUM3RSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUNyQixDQUFDO0FBQ04sQ0FBQyxDQUFDO0FBRVcsUUFBQSxZQUFZLEdBQUcsQ0FBQyxLQUF1QixFQUF3QyxFQUFFLENBQzFGLGVBQUksQ0FDQSxLQUFLLEVBQ0wsQ0FBQyxDQUFDLFlBQVksRUFDZCxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQ2hDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUNwQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FDL0YsQ0FBQztBQUdOOztHQUVHO0FBRUgsTUFBTSxnQkFBZ0IsR0FBRyxDQUFTLElBQXlCLEVBQW1DLEVBQUUsQ0FBQyxDQUFDO0lBQzlGLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRztJQUNWLEVBQUUsRUFBRSxTQUFnQjtJQUNwQixHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHO0lBQ2pCLEVBQUUsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUU7SUFDZixFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNuSixLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLO0NBQ3hCLENBQUMsQ0FBQztBQUVILE1BQU0saUJBQWlCLEdBQUcsR0FBc0IsRUFBRSxDQUFDLENBQUM7SUFDaEQsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztDQUNqQyxDQUFDLENBQUMifQ==